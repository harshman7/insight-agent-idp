(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},35247,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(59015),r=e.i(54858),d=e.i(5766),i=e.i(29228),l=e.i(55706),n=e.i(85183),c=e.i(93230),x=e.i(72526),m=e.i(34239),o=e.i(59559),h=e.i(31195);function p(){let[e,p]=(0,s.useState)([]),[u,g]=(0,s.useState)(null),[y,f]=(0,s.useState)(null),[j,N]=(0,s.useState)(null),[b,v]=(0,s.useState)([]),[w,C]=(0,s.useState)(""),[S,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{A()},[]);let A=async()=>{try{let e=await r.documentsApi.getAll(0,100);p(e.documents||[])}catch(e){d.default.error("Failed to load documents")}},F=async()=>{if(!u||!y)return void d.default.error("Please select both documents");D(!0);try{let e=await r.comparisonApi.compare(u,y);N(e)}catch(e){d.default.error("Failed to compare documents")}finally{D(!1)}},_=async()=>{if(!w)return void d.default.error("Please select a vendor");D(!0);try{let e=await r.comparisonApi.getPriceChanges(w);v(e)}catch(e){d.default.error("Failed to load price changes")}finally{D(!1)}},P=Array.from(new Set(e.map(e=>e.extracted_data?.vendor).filter(Boolean)));return(0,t.jsx)(a.default,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Document Comparison"}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Compare Two Documents"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document 1"}),(0,t.jsxs)("select",{value:u||"",onChange:e=>g(Number(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,t.jsx)("option",{value:"",children:"Select document..."}),e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.filename},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document 2"}),(0,t.jsxs)("select",{value:y||"",onChange:e=>f(Number(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,t.jsx)("option",{value:"",children:"Select document..."}),e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.filename},e.id))]})]})]}),(0,t.jsx)("button",{onClick:F,disabled:S||!u||!y,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:S?"Comparing...":"Compare Documents"}),j&&(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Document 1"}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,t.jsx)("pre",{className:"text-sm",children:JSON.stringify(j.document1,null,2)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Document 2"}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,t.jsx)("pre",{className:"text-sm",children:JSON.stringify(j.document2,null,2)})})]})]}),j.differences&&j.differences.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Differences"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Field"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Document 1"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Document 2"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Difference"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:j.differences.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.field}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:String(e.value1)}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:String(e.value2)}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.difference?`$${e.difference.toFixed(2)}`:"N/A"})]},s))})]})})]})]})]}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Price Change Detection"}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsxs)("select",{value:w,onChange:e=>C(e.target.value),className:"flex-1 border border-gray-300 rounded-md px-3 py-2",children:[(0,t.jsx)("option",{value:"",children:"Select vendor..."}),P.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsx)("button",{onClick:_,disabled:S||!w,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 disabled:opacity-50",children:S?"Loading...":"Analyze"})]}),b.length>0&&(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("h3",{className:"text-md font-medium text-gray-900 mb-4",children:["Price Changes for ",w]}),(0,t.jsx)(h.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(i.LineChart,{data:b,children:[(0,t.jsx)(x.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(n.XAxis,{dataKey:"to_date"}),(0,t.jsx)(c.YAxis,{}),(0,t.jsx)(m.Tooltip,{}),(0,t.jsx)(o.Legend,{}),(0,t.jsx)(l.Line,{type:"monotone",dataKey:"to_amount",stroke:"#3b82f6",strokeWidth:2,name:"Amount ($)"})]})}),(0,t.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"From Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"To Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"From Amount"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"To Amount"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Change"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"% Change"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.from_date}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.to_date}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",e.from_amount?.toFixed(2)]}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",e.to_amount?.toFixed(2)]}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",e.change?.toFixed(2)]}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.percent_change?.toFixed(2),"%"]})]},s))})]})})]})]})]})})}e.s(["default",()=>p])}]);