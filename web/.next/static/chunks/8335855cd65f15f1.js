(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},1308,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(59015),l=e.i(54858),r=e.i(5766);let o=s.forwardRef(function({title:e,titleId:t,...a},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}),n=s.forwardRef(function({title:e,titleId:t,...a},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});var i=e.i(27217);function d(){let[e,d]=(0,s.useState)([]),[c,x]=(0,s.useState)(!0),[u,m]=(0,s.useState)(null),[p,h]=(0,s.useState)(!1),[b,f]=(0,s.useState)(""),[g,j]=(0,s.useState)("all"),v=(0,s.useRef)(null);(0,s.useEffect)(()=>{w()},[g]);let w=async()=>{x(!0);try{let e=await l.documentsApi.getAll(0,100,"all"===g?void 0:g),t=Array.isArray(e)?e:e?.documents||[];d(t)}catch(e){console.error("Failed to load documents:",e),d([]),e.response?.status!==404&&r.default.error(e.response?.data?.detail||"Failed to load documents")}finally{x(!1)}},N=async e=>{let t=e.target.files?.[0];if(t){h(!0);try{let e=await l.documentsApi.upload(t);r.default.success(`Document processed! Created ${e.transactions_created||0} transactions.`),await w(),v.current&&(v.current.value="")}catch(e){r.default.error(e.response?.data?.detail||"Failed to upload document"),console.error(e)}finally{h(!1)}}},y=async(t,s,a)=>{try{if(await l.documentsApi.update(t,{extracted_data:{[s]:a}}),r.default.success("Document updated successfully"),await w(),u?.id===t){let s=e.find(e=>e.id===t);s&&m(s)}}catch(e){r.default.error("Failed to update document")}},k=e.filter(e=>e.filename.toLowerCase().includes(b.toLowerCase())||(e.extracted_data?.vendor||"").toLowerCase().includes(b.toLowerCase())),C=Array.from(new Set(e.map(e=>e.document_type).filter(Boolean)));return(0,t.jsx)(a.default,{children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Documents"}),(0,t.jsx)("p",{className:"text-slate-600 mt-2",children:"Manage and process your documents"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"file",ref:v,onChange:N,accept:".pdf,.png,.jpg,.jpeg",className:"hidden",id:"file-upload",disabled:p}),(0,t.jsx)("label",{htmlFor:"file-upload",className:`inline-flex items-center px-6 py-3 border border-transparent text-sm font-semibold rounded-xl shadow-lg text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 cursor-pointer transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${p?"opacity-50 cursor-not-allowed":""}`,children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{className:"h-5 w-5 mr-2"}),"Upload Document"]})})]})]}),(0,t.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-lg p-6 border border-slate-200/60",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Search"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),(0,t.jsx)("input",{type:"text",value:b,onChange:e=>f(e.target.value),placeholder:"Search by filename or vendor...",className:"pl-12 w-full border border-slate-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Filter by Type"}),(0,t.jsxs)("select",{value:g,onChange:e=>j(e.target.value),className:"w-full border border-slate-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white",children:[(0,t.jsx)("option",{value:"all",children:"All Types"}),C.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]})}),c?(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 h-32 animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-slate-200 rounded w-1/3 mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-slate-200 rounded w-1/2"})]},e))}):0===k.length?(0,t.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-lg p-16 text-center border border-slate-200/60",children:[(0,t.jsx)("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full flex items-center justify-center mb-6",children:(0,t.jsx)(o,{className:"h-10 w-10 text-indigo-600"})}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"No documents found"}),(0,t.jsx)("p",{className:"text-slate-600 mb-6",children:"Get started by uploading your first document."}),(0,t.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-6 py-3 border border-transparent text-sm font-semibold rounded-xl shadow-lg text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 cursor-pointer transition-all duration-200",children:[(0,t.jsx)(o,{className:"h-5 w-5 mr-2"}),"Upload Your First Document"]})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4",children:k.map(e=>(0,t.jsx)("div",{className:"group bg-white/80 backdrop-blur-xl rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer border border-slate-200/60 hover:border-indigo-300 overflow-hidden",onClick:()=>m(e),children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2 truncate",children:e.filename}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[(0,t.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700",children:e.document_type||"Unknown"}),e.extracted_data?.vendor&&(0,t.jsxs)("span",{className:"text-slate-600",children:["Vendor: ",(0,t.jsx)("span",{className:"font-semibold",children:e.extracted_data.vendor})]}),e.extracted_data?.total&&(0,t.jsxs)("span",{className:"text-slate-600",children:["Total: ",(0,t.jsxs)("span",{className:"font-semibold text-emerald-600",children:["$",e.extracted_data.total.toLocaleString()]})]}),(0,t.jsx)("span",{className:"text-slate-500",children:new Date(e.created_at).toLocaleDateString()})]})]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),m(e)},className:"ml-4 px-4 py-2 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl transition-colors",children:"View Details â†’"})]})})},e.id))}),u&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 py-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm transition-opacity",onClick:()=>m(null)}),(0,t.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-slate-200",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-8 py-6 flex justify-between items-center z-10 backdrop-blur-xl bg-white/95",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:u.filename}),(0,t.jsx)("button",{onClick:()=>m(null),className:"text-slate-400 hover:text-slate-600 p-2 hover:bg-slate-100 rounded-xl transition-colors","aria-label":"Close",children:(0,t.jsx)(i.XMarkIcon,{className:"h-6 w-6"})})]}),(0,t.jsx)("div",{className:"p-8 space-y-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Extracted Data"}),u.extracted_data?(0,t.jsx)("div",{className:"space-y-4",children:Object.entries(u.extracted_data).map(([e,s])=>(0,t.jsxs)("div",{className:"border-b border-slate-200 pb-4 last:border-b-0",children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}),"object"==typeof s&&null!==s?(0,t.jsx)("pre",{className:"text-sm text-slate-600 bg-slate-50 p-4 rounded-xl border border-slate-200 overflow-x-auto",children:JSON.stringify(s,null,2)}):(0,t.jsx)("input",{type:"text",value:String(s||""),onChange:t=>y(u.id,e,t.target.value),className:"w-full border border-slate-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]},e))}):(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-slate-500",children:"No extracted data available"})})]})})]})]})})]})})}e.s(["default",()=>d],1308)}]);