{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/receipts/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\n\nimport { useEffect, useState } from 'react';\nimport Layout from '@/components/Layout';\nimport { receiptApi } from '@/lib/api';\nimport toast from 'react-hot-toast';\nimport { ReceiptRefundIcon } from '@heroicons/react/24/outline';\n\ninterface Receipt {\n  receipt_id: number;\n  filename: string;\n  vendor: string;\n  amount: number;\n  date: string;\n}\n\ninterface Match {\n  invoice_id: number;\n  invoice_filename: string;\n  invoice_vendor: string;\n  invoice_total: number;\n  invoice_date: string;\n  confidence: number;\n  match_reasons: string[];\n}\n\nexport default function ReceiptsPage() {\n  const [unmatched, setUnmatched] = useState<Receipt[]>([]);\n  const [selectedReceipt, setSelectedReceipt] = useState<number | null>(null);\n  const [matches, setMatches] = useState<Match[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetchUnmatched();\n  }, []);\n\n  const fetchUnmatched = async () => {\n    try {\n      const data = await receiptApi.getUnmatched();\n      setUnmatched(data);\n    } catch (error) {\n      toast.error('Failed to load receipts');\n    }\n  };\n\n  const handleMatch = async (receiptId: number) => {\n    setSelectedReceipt(receiptId);\n    setLoading(true);\n    try {\n      const result = await receiptApi.match(receiptId);\n      if (result.matched) {\n        setMatches([result]);\n      } else {\n        // Try finding matches manually\n        toast('No direct match found. Try manual matching.', { icon: 'ℹ️' });\n        setMatches([]);\n      }\n    } catch (error) {\n      toast.error('Failed to match receipt');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"space-y-6\">\n        <h1 className=\"text-3xl font-bold text-gray-900\">Receipt-to-Invoice Matching</h1>\n\n        {/* Unmatched Receipts */}\n        <div className=\"bg-white shadow rounded-lg p-6\">\n          <h2 className=\"text-lg font-medium text-gray-900 mb-4\">Unmatched Receipts</h2>\n          {unmatched.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <ReceiptRefundIcon className=\"mx-auto h-12 w-12 text-green-400\" />\n              <h3 className=\"mt-2 text-sm font-medium text-gray-900\">All Receipts Matched</h3>\n              <p className=\"mt-1 text-sm text-gray-500\">Great job! All receipts have been matched to invoices.</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Filename</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Vendor</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Amount</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Date</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {unmatched.map((receipt) => (\n                    <tr key={receipt.receipt_id}>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                        {receipt.filename}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{receipt.vendor || 'N/A'}</td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                        ${receipt.amount?.toFixed(2) || '0.00'}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{receipt.date || 'N/A'}</td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                        <button\n                          onClick={() => handleMatch(receipt.receipt_id)}\n                          disabled={loading}\n                          className=\"text-blue-600 hover:text-blue-900 disabled:opacity-50\"\n                        >\n                          {loading && selectedReceipt === receipt.receipt_id ? 'Matching...' : 'Find Match'}\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n\n        {/* Matches */}\n        {matches.length > 0 && (\n          <div className=\"bg-white shadow rounded-lg p-6\">\n            <h2 className=\"text-lg font-medium text-gray-900 mb-4\">Matching Invoices</h2>\n            <div className=\"space-y-4\">\n              {matches.map((match, index) => {\n                const confidenceColor =\n                  match.confidence > 70 ? 'bg-green-100 text-green-800' : match.confidence > 50 ? 'bg-yellow-100 text-yellow-800' : 'bg-orange-100 text-orange-800';\n                return (\n                  <div key={index} className=\"border border-gray-200 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <h3 className=\"text-md font-medium text-gray-900\">{match.invoice_filename}</h3>\n                      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${confidenceColor}`}>\n                        {match.confidence.toFixed(0)}% confidence\n                      </span>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                      <div>\n                        <span className=\"text-gray-500\">Vendor:</span> {match.invoice_vendor}\n                      </div>\n                      <div>\n                        <span className=\"text-gray-500\">Total:</span> ${match.invoice_total?.toFixed(2)}\n                      </div>\n                      <div>\n                        <span className=\"text-gray-500\">Date:</span> {match.invoice_date}\n                      </div>\n                      <div>\n                        <span className=\"text-gray-500\">Invoice ID:</span> {match.invoice_id}\n                      </div>\n                    </div>\n                    {match.match_reasons && match.match_reasons.length > 0 && (\n                      <div className=\"mt-4\">\n                        <span className=\"text-sm font-medium text-gray-700\">Match Reasons:</span>\n                        <ul className=\"mt-2 list-disc list-inside text-sm text-gray-600\">\n                          {match.match_reasons.map((reason, i) => (\n                            <li key={i}>{reason}</li>\n                          ))}\n                        </ul>\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n      </div>\n    </Layout>\n  );\n}\n\n"],"names":["module","exports","require","vendored","AppRouterContext","ReactServerDOMTurbopackClient","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2,3]}